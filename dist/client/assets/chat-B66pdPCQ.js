import{g as Kr,r as F,j as S}from"./main-Bgt-eTC4.js";import{c as le,a as et,B as Bt}from"./button-DtJIhevx.js";var Jt="vercel.ai.error",en=Symbol.for(Jt),Wt,tn=class qt extends Error{constructor({name:t,message:r,cause:n}){super(r),this[Wt]=!0,this.name=t,this.cause=n}static isInstance(t){return qt.hasMarker(t,Jt)}static hasMarker(t,r){const n=Symbol.for(r);return t!=null&&typeof t=="object"&&n in t&&typeof t[n]=="boolean"&&t[n]===!0}};Wt=en;var te=tn;function Gt(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Yt="AI_InvalidArgumentError",Ht=`vercel.ai.error.${Yt}`,rn=Symbol.for(Ht),Xt,nn=class extends te{constructor({message:e,cause:t,argument:r}){super({name:Yt,message:e,cause:t}),this[Xt]=!0,this.argument=r}static isInstance(e){return te.hasMarker(e,Ht)}};Xt=rn;var Qt="AI_JSONParseError",Kt=`vercel.ai.error.${Qt}`,an=Symbol.for(Kt),er,lt=class extends te{constructor({text:e,cause:t}){super({name:Qt,message:`JSON parsing failed: Text: ${e}.
Error message: ${Gt(t)}`,cause:t}),this[er]=!0,this.text=e}static isInstance(e){return te.hasMarker(e,Kt)}};er=an;var tr="AI_TypeValidationError",rr=`vercel.ai.error.${tr}`,on=Symbol.for(rr),nr,sn=class We extends te{constructor({value:t,cause:r}){super({name:tr,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Gt(r)}`,cause:r}),this[nr]=!0,this.value=t}static isInstance(t){return te.hasMarker(t,rr)}static wrap({value:t,cause:r}){return We.isInstance(r)&&r.value===t?r:new We({value:t,cause:r})}};nr=on;var Te=sn;class dt extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function Ue(e){}function cn(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=Ue,onError:r=Ue,onRetry:n=Ue,onComment:a}=e;let o="",i=!0,s,l="",c="";function d(m){const g=i?m.replace(/^\xEF\xBB\xBF/,""):m,[b,y]=un(`${o}${g}`);for(const I of b)u(I);o=y,i=!1}function u(m){if(m===""){v();return}if(m.startsWith(":")){a&&a(m.slice(m.startsWith(": ")?2:1));return}const g=m.indexOf(":");if(g!==-1){const b=m.slice(0,g),y=m[g+1]===" "?2:1,I=m.slice(g+y);_(b,I,m);return}_(m,"",m)}function _(m,g,b){switch(m){case"event":c=g;break;case"data":l=`${l}${g}
`;break;case"id":s=g.includes("\0")?void 0:g;break;case"retry":/^\d+$/.test(g)?n(parseInt(g,10)):r(new dt(`Invalid \`retry\` value: "${g}"`,{type:"invalid-retry",value:g,line:b}));break;default:r(new dt(`Unknown field "${m.length>20?`${m.slice(0,20)}â€¦`:m}"`,{type:"unknown-field",field:m,value:g,line:b}));break}}function v(){l.length>0&&t({id:s,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),s=void 0,l="",c=""}function p(m={}){o&&m.consume&&u(o),i=!0,s=void 0,l="",c="",o=""}return{feed:d,reset:p}}function un(e){const t=[];let r="",n=0;for(;n<e.length;){const a=e.indexOf("\r",n),o=e.indexOf(`
`,n);let i=-1;if(a!==-1&&o!==-1?i=Math.min(a,o):a!==-1?a===e.length-1?i=-1:i=a:o!==-1&&(i=o),i===-1){r=e.slice(n);break}else{const s=e.slice(n,i);t.push(s),n=i+1,e[n-1]==="\r"&&e[n]===`
`&&n++}}return[t,r]}class ln extends TransformStream{constructor({onError:t,onRetry:r,onComment:n}={}){let a;super({start(o){a=cn({onEvent:i=>{o.enqueue(i)},onError(i){t==="terminate"?o.error(i):typeof t=="function"&&t(i)},onRetry:r,onComment:n})},transform(o){a.feed(o)}})}}function f(e,t,r){function n(s,l){var c;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(c=s._zod).traits??(c.traits=new Set),s._zod.traits.add(e),t(s,l);for(const d in i.prototype)d in s||Object.defineProperty(s,d,{value:i.prototype[d].bind(s)});s._zod.constr=i,s._zod.def=l}const a=r?.Parent??Object;class o extends a{}Object.defineProperty(o,"name",{value:e});function i(s){var l;const c=r?.Parent?new o:this;n(c,s),(l=c._zod).deferred??(l.deferred=[]);for(const d of c._zod.deferred)d();return c}return Object.defineProperty(i,"init",{value:n}),Object.defineProperty(i,Symbol.hasInstance,{value:s=>r?.Parent&&s instanceof r.Parent?!0:s?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class _e extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const ar={};function re(e){return ar}function or(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,a])=>t.indexOf(+n)===-1).map(([n,a])=>a)}function dn(e,t){return typeof t=="bigint"?t.toString():t}function tt(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function rt(e){return e==null}function nt(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function pn(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,o=Number.parseInt(e.toFixed(a).replace(".","")),i=Number.parseInt(t.toFixed(a).replace(".",""));return o%i/10**a}function Z(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function je(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function pe(e){return JSON.stringify(e)}const sr=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Ne(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const fn=tt(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Ae(e){if(Ne(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Ne(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const hn=new Set(["string","number","symbol"]);function we(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function se(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function w(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function mn(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const vn={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function gn(e,t){const r={},n=e._zod.def;for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(r[a]=n.shape[a])}return se(e,{...e._zod.def,shape:r,checks:[]})}function _n(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&delete r[a]}return se(e,{...e._zod.def,shape:r,checks:[]})}function yn(e,t){if(!Ae(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return je(this,"shape",n),n},checks:[]};return se(e,r)}function bn(e,t){return se(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return je(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function wn(e,t,r){const n=t._zod.def.shape,a={...n};if(r)for(const o in r){if(!(o in n))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(a[o]=e?new e({type:"optional",innerType:n[o]}):n[o])}else for(const o in n)a[o]=e?new e({type:"optional",innerType:n[o]}):n[o];return se(t,{...t._zod.def,shape:a,checks:[]})}function In(e,t,r){const n=t._zod.def.shape,a={...n};if(r)for(const o in r){if(!(o in a))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(a[o]=new e({type:"nonoptional",innerType:n[o]}))}else for(const o in n)a[o]=new e({type:"nonoptional",innerType:n[o]});return se(t,{...t._zod.def,shape:a,checks:[]})}function ge(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function oe(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function ke(e){return typeof e=="string"?e:e?.message}function ne(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const a=ke(e.inst?._zod.def?.error?.(e))??ke(t?.error?.(e))??ke(r.customError?.(e))??ke(r.localeError?.(e))??"Invalid input";n.message=a}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function at(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function ye(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const ir=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,dn,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},cr=f("$ZodError",ir),ur=f("$ZodError",ir,{Parent:Error});function En(e,t=r=>r.message){const r={},n=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}function kn(e,t){const r=t||function(o){return o.message},n={_errors:[]},a=o=>{for(const i of o.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(s=>a({issues:s}));else if(i.code==="invalid_key")a({issues:i.issues});else if(i.code==="invalid_element")a({issues:i.issues});else if(i.path.length===0)n._errors.push(r(i));else{let s=n,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(r(i))):s[c]=s[c]||{_errors:[]},s=s[c],l++}}};return a(e),n}const xn=e=>(t,r,n,a)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new _e;if(i.issues.length){const s=new(a?.Err??e)(i.issues.map(l=>ne(l,o,re())));throw sr(s,a?.callee),s}return i.value},Sn=e=>async(t,r,n,a)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const s=new(a?.Err??e)(i.issues.map(l=>ne(l,o,re())));throw sr(s,a?.callee),s}return i.value},lr=e=>(t,r,n)=>{const a=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},a);if(o instanceof Promise)throw new _e;return o.issues.length?{success:!1,error:new(e??cr)(o.issues.map(i=>ne(i,a,re())))}:{success:!0,data:o.value}},zn=lr(ur),dr=e=>async(t,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},a);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(i=>ne(i,a,re())))}:{success:!0,data:o.value}},Zn=dr(ur),$n=/^[cC][^\s-]{8,}$/,Tn=/^[0-9a-z]+$/,Nn=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,An=/^[0-9a-vA-V]{20}$/,On=/^[A-Za-z0-9]{27}$/,Rn=/^[a-zA-Z0-9_-]{21}$/,Pn=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Cn=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,pt=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,jn=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Mn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Dn(){return new RegExp(Mn,"u")}const Un=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ln=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Fn=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Vn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Bn=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,pr=/^[A-Za-z0-9_-]*$/,Jn=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Wn=/^\+(?:[0-9]){6,14}[0-9]$/,fr="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",qn=new RegExp(`^${fr}$`);function hr(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Gn(e){return new RegExp(`^${hr(e)}$`)}function Yn(e){const t=hr({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${fr}T(?:${n})$`)}const Hn=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Xn=/^\d+$/,Qn=/^-?\d+(?:\.\d+)?/i,Kn=/true|false/i,ea=/null/i,ta=/^[^A-Z]*$/,ra=/^[^a-z]*$/,J=f("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),mr={number:"number",bigint:"bigint",object:"date"},vr=f("$ZodCheckLessThan",(e,t)=>{J.init(e,t);const r=mr[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,o=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),gr=f("$ZodCheckGreaterThan",(e,t)=>{J.init(e,t);const r=mr[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,o=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),na=f("$ZodCheckMultipleOf",(e,t)=>{J.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):pn(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),aa=f("$ZodCheckNumberFormat",(e,t)=>{J.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[a,o]=vn[t.format];e._zod.onattach.push(i=>{const s=i._zod.bag;s.format=t.format,s.minimum=a,s.maximum=o,r&&(s.pattern=Xn)}),e._zod.check=i=>{const s=i.value;if(r){if(!Number.isInteger(s)){i.issues.push({expected:n,format:t.format,code:"invalid_type",input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?i.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):i.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}s<a&&i.issues.push({origin:"number",input:s,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),s>o&&i.issues.push({origin:"number",input:s,code:"too_big",maximum:o,inst:e})}}),oa=f("$ZodCheckMaxLength",(e,t)=>{var r;J.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!rt(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const a=n.value;if(a.length<=t.maximum)return;const i=at(a);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),sa=f("$ZodCheckMinLength",(e,t)=>{var r;J.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!rt(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const a=n.value;if(a.length>=t.minimum)return;const i=at(a);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),ia=f("$ZodCheckLengthEquals",(e,t)=>{var r;J.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!rt(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=n=>{const a=n.value,o=a.length;if(o===t.length)return;const i=at(a),s=o>t.length;n.issues.push({origin:i,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Me=f("$ZodCheckStringFormat",(e,t)=>{var r,n;J.init(e,t),e._zod.onattach.push(a=>{const o=a._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),ca=f("$ZodCheckRegex",(e,t)=>{Me.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),ua=f("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=ta),Me.init(e,t)}),la=f("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=ra),Me.init(e,t)}),da=f("$ZodCheckIncludes",(e,t)=>{J.init(e,t);const r=we(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(a=>{const o=a._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),pa=f("$ZodCheckStartsWith",(e,t)=>{J.init(e,t);const r=new RegExp(`^${we(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),fa=f("$ZodCheckEndsWith",(e,t)=>{J.init(e,t);const r=new RegExp(`.*${we(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),ha=f("$ZodCheckOverwrite",(e,t)=>{J.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class ma{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(i=>i),a=Math.min(...n.map(i=>i.length-i.trimStart().length)),o=n.map(i=>i.slice(a)).map(i=>" ".repeat(this.indent*2)+i);for(const i of o)this.content.push(i)}compile(){const t=Function,r=this?.args,a=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...r,a.join(`
`))}}const va={major:4,minor:0,patch:0},T=f("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=va;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const a of n)for(const o of a._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const a=(o,i,s)=>{let l=ge(o),c;for(const d of i){if(d._zod.def.when){if(!d._zod.def.when(o))continue}else if(l)continue;const u=o.issues.length,_=d._zod.check(o);if(_ instanceof Promise&&s?.async===!1)throw new _e;if(c||_ instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await _,o.issues.length!==u&&(l||(l=ge(o,u)))});else{if(o.issues.length===u)continue;l||(l=ge(o,u))}}return c?c.then(()=>o):o};e._zod.run=(o,i)=>{const s=e._zod.parse(o,i);if(s instanceof Promise){if(i.async===!1)throw new _e;return s.then(l=>a(l,n,i))}return a(s,n,i)}}e["~standard"]={validate:a=>{try{const o=zn(e,a);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return Zn(e,a).then(i=>i.success?{value:i.data}:{issues:i.error?.issues})}},vendor:"zod",version:1}}),ot=f("$ZodString",(e,t)=>{T.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Hn(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),R=f("$ZodStringFormat",(e,t)=>{Me.init(e,t),ot.init(e,t)}),ga=f("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Cn),R.init(e,t)}),_a=f("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=pt(n))}else t.pattern??(t.pattern=pt());R.init(e,t)}),ya=f("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=jn),R.init(e,t)}),ba=f("$ZodURL",(e,t)=>{R.init(e,t),e._zod.check=r=>{try{const n=r.value,a=new URL(n),o=a.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Jn.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&o.endsWith("/")?r.value=o.slice(0,-1):r.value=o;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),wa=f("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Dn()),R.init(e,t)}),Ia=f("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Rn),R.init(e,t)}),Ea=f("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=$n),R.init(e,t)}),ka=f("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Tn),R.init(e,t)}),xa=f("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Nn),R.init(e,t)}),Sa=f("$ZodXID",(e,t)=>{t.pattern??(t.pattern=An),R.init(e,t)}),za=f("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=On),R.init(e,t)}),Za=f("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Yn(t)),R.init(e,t)}),$a=f("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=qn),R.init(e,t)}),Ta=f("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Gn(t)),R.init(e,t)}),Na=f("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Pn),R.init(e,t)}),Aa=f("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Un),R.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Oa=f("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ln),R.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Ra=f("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Fn),R.init(e,t)}),Pa=f("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Vn),R.init(e,t),e._zod.check=r=>{const[n,a]=r.value.split("/");try{if(!a)throw new Error;const o=Number(a);if(`${o}`!==a)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function _r(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Ca=f("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Bn),R.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{_r(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function ja(e){if(!pr.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return _r(r)}const Ma=f("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=pr),R.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{ja(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Da=f("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Wn),R.init(e,t)});function Ua(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const La=f("$ZodJWT",(e,t)=>{R.init(e,t),e._zod.check=r=>{Ua(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),yr=f("$ZodNumber",(e,t)=>{T.init(e,t),e._zod.pattern=e._zod.bag.pattern??Qn,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const o=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...o?{received:o}:{}}),r}}),Fa=f("$ZodNumber",(e,t)=>{aa.init(e,t),yr.init(e,t)}),Va=f("$ZodBoolean",(e,t)=>{T.init(e,t),e._zod.pattern=Kn,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const a=r.value;return typeof a=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),r}}),Ba=f("$ZodNull",(e,t)=>{T.init(e,t),e._zod.pattern=ea,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const a=r.value;return a===null||r.issues.push({expected:"null",code:"invalid_type",input:a,inst:e}),r}}),Ja=f("$ZodUnknown",(e,t)=>{T.init(e,t),e._zod.parse=r=>r}),Wa=f("$ZodNever",(e,t)=>{T.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function ft(e,t,r){e.issues.length&&t.issues.push(...oe(r,e.issues)),t.value[r]=e.value}const qa=f("$ZodArray",(e,t)=>{T.init(e,t),e._zod.parse=(r,n)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const o=[];for(let i=0;i<a.length;i++){const s=a[i],l=t.element._zod.run({value:s,issues:[]},n);l instanceof Promise?o.push(l.then(c=>ft(c,r,i))):ft(l,r,i)}return o.length?Promise.all(o).then(()=>r):r}});function xe(e,t,r){e.issues.length&&t.issues.push(...oe(r,e.issues)),t.value[r]=e.value}function ht(e,t,r,n){e.issues.length?n[r]===void 0?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...oe(r,e.issues)):e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const Ga=f("$ZodObject",(e,t)=>{T.init(e,t);const r=tt(()=>{const u=Object.keys(t.shape);for(const v of u)if(!(t.shape[v]instanceof T))throw new Error(`Invalid element at key "${v}": expected a Zod schema`);const _=mn(t.shape);return{shape:t.shape,keys:u,keySet:new Set(u),numKeys:u.length,optionalKeys:new Set(_)}});Z(e._zod,"propValues",()=>{const u=t.shape,_={};for(const v in u){const p=u[v]._zod;if(p.values){_[v]??(_[v]=new Set);for(const m of p.values)_[v].add(m)}}return _});const n=u=>{const _=new ma(["shape","payload","ctx"]),v=r.value,p=y=>{const I=pe(y);return`shape[${I}]._zod.run({ value: input[${I}], issues: [] }, ctx)`};_.write("const input = payload.value;");const m=Object.create(null);let g=0;for(const y of v.keys)m[y]=`key_${g++}`;_.write("const newResult = {}");for(const y of v.keys)if(v.optionalKeys.has(y)){const I=m[y];_.write(`const ${I} = ${p(y)};`);const h=pe(y);_.write(`
        if (${I}.issues.length) {
          if (input[${h}] === undefined) {
            if (${h} in input) {
              newResult[${h}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${I}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${h}, ...iss.path] : [${h}],
              }))
            );
          }
        } else if (${I}.value === undefined) {
          if (${h} in input) newResult[${h}] = undefined;
        } else {
          newResult[${h}] = ${I}.value;
        }
        `)}else{const I=m[y];_.write(`const ${I} = ${p(y)};`),_.write(`
          if (${I}.issues.length) payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${pe(y)}, ...iss.path] : [${pe(y)}]
          })));`),_.write(`newResult[${pe(y)}] = ${I}.value`)}_.write("payload.value = newResult;"),_.write("return payload;");const b=_.compile();return(y,I)=>b(u,y,I)};let a;const o=Ne,i=!ar.jitless,l=i&&fn.value,c=t.catchall;let d;e._zod.parse=(u,_)=>{d??(d=r.value);const v=u.value;if(!o(v))return u.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),u;const p=[];if(i&&l&&_?.async===!1&&_.jitless!==!0)a||(a=n(t.shape)),u=a(u,_);else{u.value={};const I=d.shape;for(const h of d.keys){const O=I[h],C=O._zod.run({value:v[h],issues:[]},_),z=O._zod.optin==="optional"&&O._zod.optout==="optional";C instanceof Promise?p.push(C.then(N=>z?ht(N,u,h,v):xe(N,u,h))):z?ht(C,u,h,v):xe(C,u,h)}}if(!c)return p.length?Promise.all(p).then(()=>u):u;const m=[],g=d.keySet,b=c._zod,y=b.def.type;for(const I of Object.keys(v)){if(g.has(I))continue;if(y==="never"){m.push(I);continue}const h=b.run({value:v[I],issues:[]},_);h instanceof Promise?p.push(h.then(O=>xe(O,u,I))):xe(h,u,I)}return m.length&&u.issues.push({code:"unrecognized_keys",keys:m,input:v,inst:e}),p.length?Promise.all(p).then(()=>u):u}});function mt(e,t,r,n){for(const a of e)if(a.issues.length===0)return t.value=a.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(a=>a.issues.map(o=>ne(o,n,re())))}),t}const br=f("$ZodUnion",(e,t)=>{T.init(e,t),Z(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Z(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Z(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),Z(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>nt(n.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let a=!1;const o=[];for(const i of t.options){const s=i._zod.run({value:r.value,issues:[]},n);if(s instanceof Promise)o.push(s),a=!0;else{if(s.issues.length===0)return s;o.push(s)}}return a?Promise.all(o).then(i=>mt(i,r,e,n)):mt(o,r,e,n)}}),Ya=f("$ZodDiscriminatedUnion",(e,t)=>{br.init(e,t);const r=e._zod.parse;Z(e._zod,"propValues",()=>{const a={};for(const o of t.options){const i=o._zod.propValues;if(!i||Object.keys(i).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(const[s,l]of Object.entries(i)){a[s]||(a[s]=new Set);for(const c of l)a[s].add(c)}}return a});const n=tt(()=>{const a=t.options,o=new Map;for(const i of a){const s=i._zod.propValues[t.discriminator];if(!s||s.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(const l of s){if(o.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);o.set(l,i)}}return o});e._zod.parse=(a,o)=>{const i=a.value;if(!Ne(i))return a.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),a;const s=n.value.get(i?.[t.discriminator]);return s?s._zod.run(a,o):t.unionFallback?r(a,o):(a.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:i,path:[t.discriminator],inst:e}),a)}}),Ha=f("$ZodIntersection",(e,t)=>{T.init(e,t),e._zod.parse=(r,n)=>{const a=r.value,o=t.left._zod.run({value:a,issues:[]},n),i=t.right._zod.run({value:a,issues:[]},n);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([l,c])=>vt(r,l,c)):vt(r,o,i)}});function qe(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ae(e)&&Ae(t)){const r=Object.keys(t),n=Object.keys(e).filter(o=>r.indexOf(o)!==-1),a={...e,...t};for(const o of n){const i=qe(e[o],t[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};a[o]=i.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const a=e[n],o=t[n],i=qe(a,o);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function vt(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),ge(e))return e;const n=qe(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const Xa=f("$ZodRecord",(e,t)=>{T.init(e,t),e._zod.parse=(r,n)=>{const a=r.value;if(!Ae(a))return r.issues.push({expected:"record",code:"invalid_type",input:a,inst:e}),r;const o=[];if(t.keyType._zod.values){const i=t.keyType._zod.values;r.value={};for(const l of i)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=t.valueType._zod.run({value:a[l],issues:[]},n);c instanceof Promise?o.push(c.then(d=>{d.issues.length&&r.issues.push(...oe(l,d.issues)),r.value[l]=d.value})):(c.issues.length&&r.issues.push(...oe(l,c.issues)),r.value[l]=c.value)}let s;for(const l in a)i.has(l)||(s=s??[],s.push(l));s&&s.length>0&&r.issues.push({code:"unrecognized_keys",input:a,inst:e,keys:s})}else{r.value={};for(const i of Reflect.ownKeys(a)){if(i==="__proto__")continue;const s=t.keyType._zod.run({value:i,issues:[]},n);if(s instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(s.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:s.issues.map(c=>ne(c,n,re())),input:i,path:[i],inst:e}),r.value[s.value]=s.value;continue}const l=t.valueType._zod.run({value:a[i],issues:[]},n);l instanceof Promise?o.push(l.then(c=>{c.issues.length&&r.issues.push(...oe(i,c.issues)),r.value[s.value]=c.value})):(l.issues.length&&r.issues.push(...oe(i,l.issues)),r.value[s.value]=l.value)}}return o.length?Promise.all(o).then(()=>r):r}}),Qa=f("$ZodEnum",(e,t)=>{T.init(e,t);const r=or(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(n=>hn.has(typeof n)).map(n=>typeof n=="string"?we(n):n.toString()).join("|")})$`),e._zod.parse=(n,a)=>{const o=n.value;return e._zod.values.has(o)||n.issues.push({code:"invalid_value",values:r,input:o,inst:e}),n}}),Ka=f("$ZodLiteral",(e,t)=>{T.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?we(r):r?r.toString():String(r)).join("|")})$`),e._zod.parse=(r,n)=>{const a=r.value;return e._zod.values.has(a)||r.issues.push({code:"invalid_value",values:t.values,input:a,inst:e}),r}}),eo=f("$ZodTransform",(e,t)=>{T.init(e,t),e._zod.parse=(r,n)=>{const a=t.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(i=>(r.value=i,r));if(a instanceof Promise)throw new _e;return r.value=a,r}}),to=f("$ZodOptional",(e,t)=>{T.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Z(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Z(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${nt(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),ro=f("$ZodNullable",(e,t)=>{T.init(e,t),Z(e._zod,"optin",()=>t.innerType._zod.optin),Z(e._zod,"optout",()=>t.innerType._zod.optout),Z(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${nt(r.source)}|null)$`):void 0}),Z(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),no=f("$ZodDefault",(e,t)=>{T.init(e,t),e._zod.optin="optional",Z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(o=>gt(o,t)):gt(a,t)}});function gt(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const ao=f("$ZodPrefault",(e,t)=>{T.init(e,t),e._zod.optin="optional",Z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),oo=f("$ZodNonOptional",(e,t)=>{T.init(e,t),Z(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(o=>_t(o,e)):_t(a,e)}});function _t(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const so=f("$ZodCatch",(e,t)=>{T.init(e,t),e._zod.optin="optional",Z(e._zod,"optout",()=>t.innerType._zod.optout),Z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(i=>ne(i,n,re()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(o=>ne(o,n,re()))},input:r.value}),r.issues=[]),r)}}),io=f("$ZodPipe",(e,t)=>{T.init(e,t),Z(e._zod,"values",()=>t.in._zod.values),Z(e._zod,"optin",()=>t.in._zod.optin),Z(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(r,n)=>{const a=t.in._zod.run(r,n);return a instanceof Promise?a.then(o=>yt(o,t,n)):yt(a,t,n)}});function yt(e,t,r){return ge(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const co=f("$ZodReadonly",(e,t)=>{T.init(e,t),Z(e._zod,"propValues",()=>t.innerType._zod.propValues),Z(e._zod,"values",()=>t.innerType._zod.values),Z(e._zod,"optin",()=>t.innerType._zod.optin),Z(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(bt):bt(a)}});function bt(e){return e.value=Object.freeze(e.value),e}const uo=f("$ZodLazy",(e,t)=>{T.init(e,t),Z(e._zod,"innerType",()=>t.getter()),Z(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),Z(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),Z(e._zod,"optin",()=>e._zod.innerType._zod.optin),Z(e._zod,"optout",()=>e._zod.innerType._zod.optout),e._zod.parse=(r,n)=>e._zod.innerType._zod.run(r,n)}),lo=f("$ZodCustom",(e,t)=>{J.init(e,t),T.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,a=t.fn(n);if(a instanceof Promise)return a.then(o=>wt(o,r,n,e));wt(a,r,n,e)}});function wt(e,t,r,n){if(!e){const a={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(a.params=n._zod.def.params),t.issues.push(ye(a))}}class wr{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function po(){return new wr}const fe=po();function fo(e,t){return new e({type:"string",...w(t)})}function ho(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...w(t)})}function It(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...w(t)})}function mo(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...w(t)})}function vo(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...w(t)})}function go(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...w(t)})}function _o(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...w(t)})}function yo(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...w(t)})}function bo(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...w(t)})}function wo(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...w(t)})}function Io(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...w(t)})}function Eo(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...w(t)})}function ko(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...w(t)})}function xo(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...w(t)})}function So(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...w(t)})}function zo(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...w(t)})}function Zo(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...w(t)})}function $o(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...w(t)})}function To(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...w(t)})}function No(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...w(t)})}function Ao(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...w(t)})}function Oo(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...w(t)})}function Ro(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...w(t)})}function Po(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...w(t)})}function Co(e,t){return new e({type:"string",format:"date",check:"string_format",...w(t)})}function jo(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...w(t)})}function Mo(e,t){return new e({type:"string",format:"duration",check:"string_format",...w(t)})}function Do(e,t){return new e({type:"number",checks:[],...w(t)})}function Uo(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...w(t)})}function Lo(e,t){return new e({type:"boolean",...w(t)})}function Fo(e,t){return new e({type:"null",...w(t)})}function Vo(e){return new e({type:"unknown"})}function Bo(e,t){return new e({type:"never",...w(t)})}function Et(e,t){return new vr({check:"less_than",...w(t),value:e,inclusive:!1})}function Le(e,t){return new vr({check:"less_than",...w(t),value:e,inclusive:!0})}function kt(e,t){return new gr({check:"greater_than",...w(t),value:e,inclusive:!1})}function Fe(e,t){return new gr({check:"greater_than",...w(t),value:e,inclusive:!0})}function xt(e,t){return new na({check:"multiple_of",...w(t),value:e})}function Ir(e,t){return new oa({check:"max_length",...w(t),maximum:e})}function Oe(e,t){return new sa({check:"min_length",...w(t),minimum:e})}function Er(e,t){return new ia({check:"length_equals",...w(t),length:e})}function Jo(e,t){return new ca({check:"string_format",format:"regex",...w(t),pattern:e})}function Wo(e){return new ua({check:"string_format",format:"lowercase",...w(e)})}function qo(e){return new la({check:"string_format",format:"uppercase",...w(e)})}function Go(e,t){return new da({check:"string_format",format:"includes",...w(t),includes:e})}function Yo(e,t){return new pa({check:"string_format",format:"starts_with",...w(t),prefix:e})}function Ho(e,t){return new fa({check:"string_format",format:"ends_with",...w(t),suffix:e})}function Ie(e){return new ha({check:"overwrite",tx:e})}function Xo(e){return Ie(t=>t.normalize(e))}function Qo(){return Ie(e=>e.trim())}function Ko(){return Ie(e=>e.toLowerCase())}function es(){return Ie(e=>e.toUpperCase())}function ts(e,t,r){return new e({type:"array",element:t,...w(r)})}function rs(e,t,r){const n=w(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function ns(e,t,r){return new e({type:"custom",check:"custom",fn:t,...w(r)})}class St{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??fe,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,r={path:[],schemaPath:[]}){var n;const a=t._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i=this.seen.get(t);if(i)return i.count++,r.schemaPath.includes(t)&&(i.cycle=r.path),i.schema;const s={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(t,s);const l=t._zod.toJSONSchema?.();if(l)s.schema=l;else{const u={...r,schemaPath:[...r.schemaPath,t],path:r.path},_=t._zod.parent;if(_)s.ref=_,this.process(_,u),this.seen.get(_).isParent=!0;else{const v=s.schema;switch(a.type){case"string":{const p=v;p.type="string";const{minimum:m,maximum:g,format:b,patterns:y,contentEncoding:I}=t._zod.bag;if(typeof m=="number"&&(p.minLength=m),typeof g=="number"&&(p.maxLength=g),b&&(p.format=o[b]??b,p.format===""&&delete p.format),I&&(p.contentEncoding=I),y&&y.size>0){const h=[...y];h.length===1?p.pattern=h[0].source:h.length>1&&(s.schema.allOf=[...h.map(O=>({...this.target==="draft-7"?{type:"string"}:{},pattern:O.source}))])}break}case"number":{const p=v,{minimum:m,maximum:g,format:b,multipleOf:y,exclusiveMaximum:I,exclusiveMinimum:h}=t._zod.bag;typeof b=="string"&&b.includes("int")?p.type="integer":p.type="number",typeof h=="number"&&(p.exclusiveMinimum=h),typeof m=="number"&&(p.minimum=m,typeof h=="number"&&(h>=m?delete p.minimum:delete p.exclusiveMinimum)),typeof I=="number"&&(p.exclusiveMaximum=I),typeof g=="number"&&(p.maximum=g,typeof I=="number"&&(I<=g?delete p.maximum:delete p.exclusiveMaximum)),typeof y=="number"&&(p.multipleOf=y);break}case"boolean":{const p=v;p.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{v.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{v.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const p=v,{minimum:m,maximum:g}=t._zod.bag;typeof m=="number"&&(p.minItems=m),typeof g=="number"&&(p.maxItems=g),p.type="array",p.items=this.process(a.element,{...u,path:[...u.path,"items"]});break}case"object":{const p=v;p.type="object",p.properties={};const m=a.shape;for(const y in m)p.properties[y]=this.process(m[y],{...u,path:[...u.path,"properties",y]});const g=new Set(Object.keys(m)),b=new Set([...g].filter(y=>{const I=a.shape[y]._zod;return this.io==="input"?I.optin===void 0:I.optout===void 0}));b.size>0&&(p.required=Array.from(b)),a.catchall?._zod.def.type==="never"?p.additionalProperties=!1:a.catchall?a.catchall&&(p.additionalProperties=this.process(a.catchall,{...u,path:[...u.path,"additionalProperties"]})):this.io==="output"&&(p.additionalProperties=!1);break}case"union":{const p=v;p.anyOf=a.options.map((m,g)=>this.process(m,{...u,path:[...u.path,"anyOf",g]}));break}case"intersection":{const p=v,m=this.process(a.left,{...u,path:[...u.path,"allOf",0]}),g=this.process(a.right,{...u,path:[...u.path,"allOf",1]}),b=I=>"allOf"in I&&Object.keys(I).length===1,y=[...b(m)?m.allOf:[m],...b(g)?g.allOf:[g]];p.allOf=y;break}case"tuple":{const p=v;p.type="array";const m=a.items.map((y,I)=>this.process(y,{...u,path:[...u.path,"prefixItems",I]}));if(this.target==="draft-2020-12"?p.prefixItems=m:p.items=m,a.rest){const y=this.process(a.rest,{...u,path:[...u.path,"items"]});this.target==="draft-2020-12"?p.items=y:p.additionalItems=y}a.rest&&(p.items=this.process(a.rest,{...u,path:[...u.path,"items"]}));const{minimum:g,maximum:b}=t._zod.bag;typeof g=="number"&&(p.minItems=g),typeof b=="number"&&(p.maxItems=b);break}case"record":{const p=v;p.type="object",p.propertyNames=this.process(a.keyType,{...u,path:[...u.path,"propertyNames"]}),p.additionalProperties=this.process(a.valueType,{...u,path:[...u.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const p=v,m=or(a.entries);m.every(g=>typeof g=="number")&&(p.type="number"),m.every(g=>typeof g=="string")&&(p.type="string"),p.enum=m;break}case"literal":{const p=v,m=[];for(const g of a.values)if(g===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof g=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");m.push(Number(g))}else m.push(g);if(m.length!==0)if(m.length===1){const g=m[0];p.type=g===null?"null":typeof g,p.const=g}else m.every(g=>typeof g=="number")&&(p.type="number"),m.every(g=>typeof g=="string")&&(p.type="string"),m.every(g=>typeof g=="boolean")&&(p.type="string"),m.every(g=>g===null)&&(p.type="null"),p.enum=m;break}case"file":{const p=v,m={type:"string",format:"binary",contentEncoding:"binary"},{minimum:g,maximum:b,mime:y}=t._zod.bag;g!==void 0&&(m.minLength=g),b!==void 0&&(m.maxLength=b),y?y.length===1?(m.contentMediaType=y[0],Object.assign(p,m)):p.anyOf=y.map(I=>({...m,contentMediaType:I})):Object.assign(p,m);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const p=this.process(a.innerType,u);v.anyOf=[p,{type:"null"}];break}case"nonoptional":{this.process(a.innerType,u),s.ref=a.innerType;break}case"success":{const p=v;p.type="boolean";break}case"default":{this.process(a.innerType,u),s.ref=a.innerType,v.default=JSON.parse(JSON.stringify(a.defaultValue));break}case"prefault":{this.process(a.innerType,u),s.ref=a.innerType,this.io==="input"&&(v._prefault=JSON.parse(JSON.stringify(a.defaultValue)));break}case"catch":{this.process(a.innerType,u),s.ref=a.innerType;let p;try{p=a.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}v.default=p;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const p=v,m=t._zod.pattern;if(!m)throw new Error("Pattern not found in template literal");p.type="string",p.pattern=m.source;break}case"pipe":{const p=this.io==="input"?a.in._zod.def.type==="transform"?a.out:a.in:a.out;this.process(p,u),s.ref=p;break}case"readonly":{this.process(a.innerType,u),s.ref=a.innerType,v.readOnly=!0;break}case"promise":{this.process(a.innerType,u),s.ref=a.innerType;break}case"optional":{this.process(a.innerType,u),s.ref=a.innerType;break}case"lazy":{const p=t._zod.innerType;this.process(p,u),s.ref=p;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const c=this.metadataRegistry.get(t);return c&&Object.assign(s.schema,c),this.io==="input"&&U(t)&&(delete s.schema.examples,delete s.schema.default),this.io==="input"&&s.schema._prefault&&((n=s.schema).default??(n.default=s.schema._prefault)),delete s.schema._prefault,this.seen.get(t).schema}emit(t,r){const n={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},a=this.seen.get(t);if(!a)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=d=>{const u=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const m=n.external.registry.get(d[0])?.id,g=n.external.uri??(y=>y);if(m)return{ref:g(m)};const b=d[1].defId??d[1].schema.id??`schema${this.counter++}`;return d[1].defId=b,{defId:b,ref:`${g("__shared")}#/${u}/${b}`}}if(d[1]===a)return{ref:"#"};const v=`#/${u}/`,p=d[1].schema.id??`__schema${this.counter++}`;return{defId:p,ref:v+p}},i=d=>{if(d[1].schema.$ref)return;const u=d[1],{ref:_,defId:v}=o(d);u.def={...u.schema},v&&(u.defId=v);const p=u.schema;for(const m in p)delete p[m];p.$ref=_};if(n.cycles==="throw")for(const d of this.seen.entries()){const u=d[1];if(u.cycle)throw new Error(`Cycle detected: #/${u.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const d of this.seen.entries()){const u=d[1];if(t===d[0]){i(d);continue}if(n.external){const v=n.external.registry.get(d[0])?.id;if(t!==d[0]&&v){i(d);continue}}if(this.metadataRegistry.get(d[0])?.id){i(d);continue}if(u.cycle){i(d);continue}if(u.count>1&&n.reused==="ref"){i(d);continue}}const s=(d,u)=>{const _=this.seen.get(d),v=_.def??_.schema,p={...v};if(_.ref===null)return;const m=_.ref;if(_.ref=null,m){s(m,u);const g=this.seen.get(m).schema;g.$ref&&u.target==="draft-7"?(v.allOf=v.allOf??[],v.allOf.push(g)):(Object.assign(v,g),Object.assign(v,p))}_.isParent||this.override({zodSchema:d,jsonSchema:v,path:_.path??[]})};for(const d of[...this.seen.entries()].reverse())s(d[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),n.external?.uri){const d=n.external.registry.get(t)?.id;if(!d)throw new Error("Schema is missing an `id` property");l.$id=n.external.uri(d)}Object.assign(l,a.def);const c=n.external?.defs??{};for(const d of this.seen.entries()){const u=d[1];u.def&&u.defId&&(c[u.defId]=u.def)}n.external||Object.keys(c).length>0&&(this.target==="draft-2020-12"?l.$defs=c:l.definitions=c);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function as(e,t){if(e instanceof wr){const n=new St(t),a={};for(const s of e._idmap.entries()){const[l,c]=s;n.process(c)}const o={},i={registry:e,uri:t?.uri,defs:a};for(const s of e._idmap.entries()){const[l,c]=s;o[l]=n.emit(c,{...t,external:i})}if(Object.keys(a).length>0){const s=n.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[s]:a}}return{schemas:o}}const r=new St(t);return r.process(e),r.emit(e,t)}function U(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const a=e._zod.def;switch(a.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return U(a.element,r);case"object":{for(const o in a.shape)if(U(a.shape[o],r))return!0;return!1}case"union":{for(const o of a.options)if(U(o,r))return!0;return!1}case"intersection":return U(a.left,r)||U(a.right,r);case"tuple":{for(const o of a.items)if(U(o,r))return!0;return!!(a.rest&&U(a.rest,r))}case"record":return U(a.keyType,r)||U(a.valueType,r);case"map":return U(a.keyType,r)||U(a.valueType,r);case"set":return U(a.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return U(a.innerType,r);case"lazy":return U(a.getter(),r);case"default":return U(a.innerType,r);case"prefault":return U(a.innerType,r);case"custom":return!1;case"transform":return!0;case"pipe":return U(a.in,r)||U(a.out,r);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${a.type}`)}const os=f("ZodISODateTime",(e,t)=>{Za.init(e,t),M.init(e,t)});function ss(e){return Po(os,e)}const is=f("ZodISODate",(e,t)=>{$a.init(e,t),M.init(e,t)});function cs(e){return Co(is,e)}const us=f("ZodISOTime",(e,t)=>{Ta.init(e,t),M.init(e,t)});function ls(e){return jo(us,e)}const ds=f("ZodISODuration",(e,t)=>{Na.init(e,t),M.init(e,t)});function ps(e){return Mo(ds,e)}const fs=(e,t)=>{cr.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>kn(e,r)},flatten:{value:r=>En(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},De=f("ZodError",fs,{Parent:Error}),hs=xn(De),ms=Sn(De),vs=lr(De),kr=dr(De),P=f("ZodType",(e,t)=>(T.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>se(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>hs(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>vs(e,r,n),e.parseAsync=async(r,n)=>ms(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>kr(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(di(r,n)),e.superRefine=r=>e.check(pi(r)),e.overwrite=r=>e.check(Ie(r)),e.optional=()=>$t(e),e.nullable=()=>Tt(e),e.nullish=()=>$t(Tt(e)),e.nonoptional=r=>ri(e,r),e.array=()=>de(e),e.or=r=>G([e,r]),e.and=r=>Ws(e,r),e.transform=r=>Nt(e,Hs(r)),e.default=r=>Ks(e,r),e.prefault=r=>ti(e,r),e.catch=r=>ai(e,r),e.pipe=r=>Nt(e,r),e.readonly=()=>ii(e),e.describe=r=>{const n=e.clone();return fe.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return fe.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return fe.get(e);const n=e.clone();return fe.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),xr=f("_ZodString",(e,t)=>{ot.init(e,t),P.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Jo(...n)),e.includes=(...n)=>e.check(Go(...n)),e.startsWith=(...n)=>e.check(Yo(...n)),e.endsWith=(...n)=>e.check(Ho(...n)),e.min=(...n)=>e.check(Oe(...n)),e.max=(...n)=>e.check(Ir(...n)),e.length=(...n)=>e.check(Er(...n)),e.nonempty=(...n)=>e.check(Oe(1,...n)),e.lowercase=n=>e.check(Wo(n)),e.uppercase=n=>e.check(qo(n)),e.trim=()=>e.check(Qo()),e.normalize=(...n)=>e.check(Xo(...n)),e.toLowerCase=()=>e.check(Ko()),e.toUpperCase=()=>e.check(es())}),gs=f("ZodString",(e,t)=>{ot.init(e,t),xr.init(e,t),e.email=r=>e.check(ho(_s,r)),e.url=r=>e.check(yo(ys,r)),e.jwt=r=>e.check(Ro(Rs,r)),e.emoji=r=>e.check(bo(bs,r)),e.guid=r=>e.check(It(zt,r)),e.uuid=r=>e.check(mo(Se,r)),e.uuidv4=r=>e.check(vo(Se,r)),e.uuidv6=r=>e.check(go(Se,r)),e.uuidv7=r=>e.check(_o(Se,r)),e.nanoid=r=>e.check(wo(ws,r)),e.guid=r=>e.check(It(zt,r)),e.cuid=r=>e.check(Io(Is,r)),e.cuid2=r=>e.check(Eo(Es,r)),e.ulid=r=>e.check(ko(ks,r)),e.base64=r=>e.check(No(Ns,r)),e.base64url=r=>e.check(Ao(As,r)),e.xid=r=>e.check(xo(xs,r)),e.ksuid=r=>e.check(So(Ss,r)),e.ipv4=r=>e.check(zo(zs,r)),e.ipv6=r=>e.check(Zo(Zs,r)),e.cidrv4=r=>e.check($o($s,r)),e.cidrv6=r=>e.check(To(Ts,r)),e.e164=r=>e.check(Oo(Os,r)),e.datetime=r=>e.check(ss(r)),e.date=r=>e.check(cs(r)),e.time=r=>e.check(ls(r)),e.duration=r=>e.check(ps(r))});function E(e){return fo(gs,e)}const M=f("ZodStringFormat",(e,t)=>{R.init(e,t),xr.init(e,t)}),_s=f("ZodEmail",(e,t)=>{ya.init(e,t),M.init(e,t)}),zt=f("ZodGUID",(e,t)=>{ga.init(e,t),M.init(e,t)}),Se=f("ZodUUID",(e,t)=>{_a.init(e,t),M.init(e,t)}),ys=f("ZodURL",(e,t)=>{ba.init(e,t),M.init(e,t)}),bs=f("ZodEmoji",(e,t)=>{wa.init(e,t),M.init(e,t)}),ws=f("ZodNanoID",(e,t)=>{Ia.init(e,t),M.init(e,t)}),Is=f("ZodCUID",(e,t)=>{Ea.init(e,t),M.init(e,t)}),Es=f("ZodCUID2",(e,t)=>{ka.init(e,t),M.init(e,t)}),ks=f("ZodULID",(e,t)=>{xa.init(e,t),M.init(e,t)}),xs=f("ZodXID",(e,t)=>{Sa.init(e,t),M.init(e,t)}),Ss=f("ZodKSUID",(e,t)=>{za.init(e,t),M.init(e,t)}),zs=f("ZodIPv4",(e,t)=>{Aa.init(e,t),M.init(e,t)}),Zs=f("ZodIPv6",(e,t)=>{Oa.init(e,t),M.init(e,t)}),$s=f("ZodCIDRv4",(e,t)=>{Ra.init(e,t),M.init(e,t)}),Ts=f("ZodCIDRv6",(e,t)=>{Pa.init(e,t),M.init(e,t)}),Ns=f("ZodBase64",(e,t)=>{Ca.init(e,t),M.init(e,t)}),As=f("ZodBase64URL",(e,t)=>{Ma.init(e,t),M.init(e,t)}),Os=f("ZodE164",(e,t)=>{Da.init(e,t),M.init(e,t)}),Rs=f("ZodJWT",(e,t)=>{La.init(e,t),M.init(e,t)}),Sr=f("ZodNumber",(e,t)=>{yr.init(e,t),P.init(e,t),e.gt=(n,a)=>e.check(kt(n,a)),e.gte=(n,a)=>e.check(Fe(n,a)),e.min=(n,a)=>e.check(Fe(n,a)),e.lt=(n,a)=>e.check(Et(n,a)),e.lte=(n,a)=>e.check(Le(n,a)),e.max=(n,a)=>e.check(Le(n,a)),e.int=n=>e.check(Zt(n)),e.safe=n=>e.check(Zt(n)),e.positive=n=>e.check(kt(0,n)),e.nonnegative=n=>e.check(Fe(0,n)),e.negative=n=>e.check(Et(0,n)),e.nonpositive=n=>e.check(Le(0,n)),e.multipleOf=(n,a)=>e.check(xt(n,a)),e.step=(n,a)=>e.check(xt(n,a)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Ps(e){return Do(Sr,e)}const Cs=f("ZodNumberFormat",(e,t)=>{Fa.init(e,t),Sr.init(e,t)});function Zt(e){return Uo(Cs,e)}const js=f("ZodBoolean",(e,t)=>{Va.init(e,t),P.init(e,t)});function B(e){return Lo(js,e)}const Ms=f("ZodNull",(e,t)=>{Ba.init(e,t),P.init(e,t)});function Ds(e){return Fo(Ms,e)}const Us=f("ZodUnknown",(e,t)=>{Ja.init(e,t),P.init(e,t)});function K(){return Vo(Us)}const Ls=f("ZodNever",(e,t)=>{Wa.init(e,t),P.init(e,t)});function zr(e){return Bo(Ls,e)}const Fs=f("ZodArray",(e,t)=>{qa.init(e,t),P.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Oe(r,n)),e.nonempty=r=>e.check(Oe(1,r)),e.max=(r,n)=>e.check(Ir(r,n)),e.length=(r,n)=>e.check(Er(r,n)),e.unwrap=()=>e.element});function de(e,t){return ts(Fs,e,t)}const Zr=f("ZodObject",(e,t)=>{Ga.init(e,t),P.init(e,t),Z(e,"shape",()=>t.shape),e.keyof=()=>Tr(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:K()}),e.loose=()=>e.clone({...e._zod.def,catchall:K()}),e.strict=()=>e.clone({...e._zod.def,catchall:zr()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>yn(e,r),e.merge=r=>bn(e,r),e.pick=r=>gn(e,r),e.omit=r=>_n(e,r),e.partial=(...r)=>wn(Nr,e,r[0]),e.required=(...r)=>In(Ar,e,r[0])});function L(e,t){const r={type:"object",get shape(){return je(this,"shape",{...e}),this.shape},...w(t)};return new Zr(r)}function j(e,t){return new Zr({type:"object",get shape(){return je(this,"shape",{...e}),this.shape},catchall:zr(),...w(t)})}const $r=f("ZodUnion",(e,t)=>{br.init(e,t),P.init(e,t),e.options=t.options});function G(e,t){return new $r({type:"union",options:e,...w(t)})}const Vs=f("ZodDiscriminatedUnion",(e,t)=>{$r.init(e,t),Ya.init(e,t)});function Bs(e,t,r){return new Vs({type:"union",options:t,discriminator:e,...w(r)})}const Js=f("ZodIntersection",(e,t)=>{Ha.init(e,t),P.init(e,t)});function Ws(e,t){return new Js({type:"intersection",left:e,right:t})}const qs=f("ZodRecord",(e,t)=>{Xa.init(e,t),P.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Ge(e,t,r){return new qs({type:"record",keyType:e,valueType:t,...w(r)})}const Ye=f("ZodEnum",(e,t)=>{Qa.init(e,t),P.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,a)=>{const o={};for(const i of n)if(r.has(i))o[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new Ye({...t,checks:[],...w(a),entries:o})},e.exclude=(n,a)=>{const o={...t.entries};for(const i of n)if(r.has(i))delete o[i];else throw new Error(`Key ${i} not found in enum`);return new Ye({...t,checks:[],...w(a),entries:o})}});function Tr(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Ye({type:"enum",entries:r,...w(t)})}const Gs=f("ZodLiteral",(e,t)=>{Ka.init(e,t),P.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function x(e,t){return new Gs({type:"literal",values:Array.isArray(e)?e:[e],...w(t)})}const Ys=f("ZodTransform",(e,t)=>{eo.init(e,t),P.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=o=>{if(typeof o=="string")r.issues.push(ye(o,r.value,t));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),i.continue??(i.continue=!0),r.issues.push(ye(i))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(o=>(r.value=o,r)):(r.value=a,r)}});function Hs(e){return new Ys({type:"transform",transform:e})}const Nr=f("ZodOptional",(e,t)=>{to.init(e,t),P.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $t(e){return new Nr({type:"optional",innerType:e})}const Xs=f("ZodNullable",(e,t)=>{ro.init(e,t),P.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Tt(e){return new Xs({type:"nullable",innerType:e})}const Qs=f("ZodDefault",(e,t)=>{no.init(e,t),P.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Ks(e,t){return new Qs({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const ei=f("ZodPrefault",(e,t)=>{ao.init(e,t),P.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ti(e,t){return new ei({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Ar=f("ZodNonOptional",(e,t)=>{oo.init(e,t),P.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ri(e,t){return new Ar({type:"nonoptional",innerType:e,...w(t)})}const ni=f("ZodCatch",(e,t)=>{so.init(e,t),P.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function ai(e,t){return new ni({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const oi=f("ZodPipe",(e,t)=>{io.init(e,t),P.init(e,t),e.in=t.in,e.out=t.out});function Nt(e,t){return new oi({type:"pipe",in:e,out:t})}const si=f("ZodReadonly",(e,t)=>{co.init(e,t),P.init(e,t)});function ii(e){return new si({type:"readonly",innerType:e})}const ci=f("ZodLazy",(e,t)=>{uo.init(e,t),P.init(e,t),e.unwrap=()=>e._zod.def.getter()});function ui(e){return new ci({type:"lazy",getter:e})}const st=f("ZodCustom",(e,t)=>{lo.init(e,t),P.init(e,t)});function li(e){const t=new J({check:"custom"});return t._zod.check=e,t}function Or(e,t){return rs(st,e??(()=>!0),t)}function di(e,t={}){return ns(st,e,t)}function pi(e){const t=li(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(ye(n,r.value,t._zod.def));else{const a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(ye(a))}},e(r.value,r)));return t}function Re(e,t={error:`Input not instance of ${e.name}`}){const r=new st({type:"custom",check:"custom",fn:n=>n instanceof e,abort:!0,...w(t)});return r._zod.bag.Class=e,r}var k;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(k||(k={}));var Ee=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{const a=()=>{const o=r.length,i=new Array(t);for(let s=0;s<t;s++)i[s]=r[Math.random()*o|0];return i.join("")};if(e==null)return a;if(r.includes(n))throw new nn({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${e}${n}${a()}`},fi=Ee();function At(e=globalThis){var t,r,n;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(n=(r=e.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function ae(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((r,n)=>{t[n.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(const[r,n]of e)n!=null&&(t[r.toLowerCase()]=n)}return t}function Ot(e,...t){const r=new Headers(ae(e)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var hi=/"__proto__"\s*:/,mi=/"constructor"\s*:/;function Rt(e){const t=JSON.parse(e);return t===null||typeof t!="object"||hi.test(e)===!1&&mi.test(e)===!1?t:vi(t)}function vi(e){let t=[e];for(;t.length;){const r=t;t=[];for(const n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const a in n){const o=n[a];o&&typeof o=="object"&&t.push(o)}}}return e}function gi(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return Rt(e)}try{return Rt(e)}finally{Error.stackTraceLimit=t}}var Pe=Symbol.for("vercel.ai.validator");function _i(e){return{[Pe]:!0,validate:e}}function yi(e){return typeof e=="object"&&e!==null&&Pe in e&&e[Pe]===!0&&"validate"in e}function bi(e){let t;return()=>(t==null&&(t=e()),t)}function wi(e){return yi(e)?e:typeof e=="function"?e():Ii(e)}function Ii(e){return _i(async t=>{const r=await e["~standard"].validate(t);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new Te({value:t,cause:r.issues})}})}async function Pt({value:e,schema:t}){const r=await it({value:e,schema:t});if(!r.success)throw Te.wrap({value:e,cause:r.error});return r.value}async function it({value:e,schema:t}){const r=wi(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};const n=await r.validate(e);return n.success?{success:!0,value:n.value,rawValue:e}:{success:!1,error:Te.wrap({value:e,cause:n.error}),rawValue:e}}catch(n){return{success:!1,error:Te.wrap({value:e,cause:n}),rawValue:e}}}async function Ce({text:e,schema:t}){try{const r=gi(e);return t==null?{success:!0,value:r,rawValue:r}:await it({value:r,schema:t})}catch(r){return{success:!1,error:lt.isInstance(r)?r:new lt({text:e,cause:r}),rawValue:void 0}}}function Ei({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new ln).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await Ce({text:r,schema:t}))}}))}async function ie(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var ki=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},xi=Symbol("Let zodToJsonSchema decide on which parser to use"),Ct={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Si=e=>typeof e=="string"?{...Ct,name:e}:{...Ct,...e};function W(){return{}}function zi(e,t){var r,n,a;const o={type:"array"};return(r=e.type)!=null&&r._def&&((a=(n=e.type)==null?void 0:n._def)==null?void 0:a.typeName)!==k.ZodAny&&(o.items=$(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(o.minItems=e.minLength.value),e.maxLength&&(o.maxItems=e.maxLength.value),e.exactLength&&(o.minItems=e.exactLength.value,o.maxItems=e.exactLength.value),o}function Zi(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function $i(){return{type:"boolean"}}function Rr(e,t){return $(e.type._def,t)}var Ti=(e,t)=>$(e.innerType._def,t);function Pr(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((a,o)=>Pr(e,t,a))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Ni(e)}}var Ni=e=>{const t={type:"integer",format:"unix-time"};for(const r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function Ai(e,t){return{...$(e.innerType._def,t),default:e.defaultValue()}}function Oi(e,t){return t.effectStrategy==="input"?$(e.schema._def,t):W()}function Ri(e){return{type:"string",enum:Array.from(e.values)}}var Pi=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Ci(e,t){const r=[$(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),$(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(a=>!!a),n=[];return r.forEach(a=>{if(Pi(a))n.push(...a.allOf);else{let o=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:i,...s}=a;o=s}n.push(o)}}),n.length?{allOf:n}:void 0}function ji(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var Ve=void 0,H={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Ve===void 0&&(Ve=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ve),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Cr(e,t){const r={type:"string"};if(e.checks)for(const n of e.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(t.emailStrategy){case"format:email":X(r,"email",n.message,t);break;case"format:idn-email":X(r,"idn-email",n.message,t);break;case"pattern:zod":V(r,H.email,n.message,t);break}break;case"url":X(r,"uri",n.message,t);break;case"uuid":X(r,"uuid",n.message,t);break;case"regex":V(r,n.regex,n.message,t);break;case"cuid":V(r,H.cuid,n.message,t);break;case"cuid2":V(r,H.cuid2,n.message,t);break;case"startsWith":V(r,RegExp(`^${Be(n.value,t)}`),n.message,t);break;case"endsWith":V(r,RegExp(`${Be(n.value,t)}$`),n.message,t);break;case"datetime":X(r,"date-time",n.message,t);break;case"date":X(r,"date",n.message,t);break;case"time":X(r,"time",n.message,t);break;case"duration":X(r,"duration",n.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{V(r,RegExp(Be(n.value,t)),n.message,t);break}case"ip":{n.version!=="v6"&&X(r,"ipv4",n.message,t),n.version!=="v4"&&X(r,"ipv6",n.message,t);break}case"base64url":V(r,H.base64url,n.message,t);break;case"jwt":V(r,H.jwt,n.message,t);break;case"cidr":{n.version!=="v6"&&V(r,H.ipv4Cidr,n.message,t),n.version!=="v4"&&V(r,H.ipv6Cidr,n.message,t);break}case"emoji":V(r,H.emoji(),n.message,t);break;case"ulid":{V(r,H.ulid,n.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{X(r,"binary",n.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{V(r,H.base64,n.message,t);break}}break}case"nanoid":V(r,H.nanoid,n.message,t)}return r}function Be(e,t){return t.patternStrategy==="escape"?Di(e):e}var Mi=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Di(e){let t="";for(let r=0;r<e.length;r++)Mi.has(e[r])||(t+="\\"),t+=e[r];return t}function X(e,t,r,n){var a;e.format||(a=e.anyOf)!=null&&a.some(o=>o.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function V(e,t,r,n){var a;e.pattern||(a=e.allOf)!=null&&a.some(o=>o.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:jt(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=jt(t,n)}function jt(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},a=n.i?e.source.toLowerCase():e.source;let o="",i=!1,s=!1,l=!1;for(let c=0;c<a.length;c++){if(i){o+=a[c],i=!1;continue}if(n.i){if(s){if(a[c].match(/[a-z]/)){l?(o+=a[c],o+=`${a[c-2]}-${a[c]}`.toUpperCase(),l=!1):a[c+1]==="-"&&((r=a[c+2])!=null&&r.match(/[a-z]/))?(o+=a[c],l=!0):o+=`${a[c]}${a[c].toUpperCase()}`;continue}}else if(a[c].match(/[a-z]/)){o+=`[${a[c]}${a[c].toUpperCase()}]`;continue}}if(n.m){if(a[c]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(a[c]==="$"){o+=`($|(?=[\r
]))`;continue}}if(n.s&&a[c]==="."){o+=s?`${a[c]}\r
`:`[${a[c]}\r
]`;continue}o+=a[c],a[c]==="\\"?i=!0:s&&a[c]==="]"?s=!1:!s&&a[c]==="["&&(s=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function jr(e,t){var r,n,a,o,i,s;const l={type:"object",additionalProperties:(r=$(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((n=e.keyType)==null?void 0:n._def.typeName)===k.ZodString&&((a=e.keyType._def.checks)!=null&&a.length)){const{type:c,...d}=Cr(e.keyType._def,t);return{...l,propertyNames:d}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===k.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===k.ZodBranded&&e.keyType._def.type._def.typeName===k.ZodString&&((s=e.keyType._def.type._def.checks)!=null&&s.length)){const{type:c,...d}=Rr(e.keyType._def,t);return{...l,propertyNames:d}}}return l}function Ui(e,t){if(t.mapStrategy==="record")return jr(e,t);const r=$(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||W(),n=$(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||W();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function Li(e){const t=e.values,n=Object.keys(e.values).filter(o=>typeof t[t[o]]!="number").map(o=>t[o]),a=Array.from(new Set(n.map(o=>typeof o)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:n}}function Fi(){return{not:W()}}function Vi(){return{type:"null"}}var He={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Bi(e,t){const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in He&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((a,o)=>{const i=He[o._def.typeName];return i&&!a.includes(i)?[...a,i]:a},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((a,o)=>{const i=typeof o._def.value;switch(i){case"string":case"number":case"boolean":return[...a,i];case"bigint":return[...a,"integer"];case"object":if(o._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(n.length===r.length){const a=n.filter((o,i,s)=>s.indexOf(o)===i);return{type:a.length>1?a:a[0],enum:r.reduce((o,i)=>o.includes(i._def.value)?o:[...o,i._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,a)=>[...n,...a._def.values.filter(o=>!n.includes(o))],[])};return Ji(e,t)}var Ji=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,a)=>$(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function Wi(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[He[e.innerType._def.typeName],"null"]};const r=$(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function qi(e){const t={type:"number"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function Gi(e,t){const r={type:"object",properties:{}},n=[],a=e.shape();for(const i in a){let s=a[i];if(s===void 0||s._def===void 0)continue;const l=Hi(s),c=$(s._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});c!==void 0&&(r.properties[i]=c,l||n.push(i))}n.length&&(r.required=n);const o=Yi(e,t);return o!==void 0&&(r.additionalProperties=o),r}function Yi(e,t){if(e.catchall._def.typeName!=="ZodNever")return $(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Hi(e){try{return e.isOptional()}catch{return!0}}var Xi=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return $(e.innerType._def,t);const n=$(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:W()},n]}:W()},Qi=(e,t)=>{if(t.pipeStrategy==="input")return $(e.in._def,t);if(t.pipeStrategy==="output")return $(e.out._def,t);const r=$(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=$(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(a=>a!==void 0)}};function Ki(e,t){return $(e.type._def,t)}function ec(e,t){const n={type:"array",uniqueItems:!0,items:$(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(n.minItems=e.minSize.value),e.maxSize&&(n.maxItems=e.maxSize.value),n}function tc(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>$(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:$(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>$(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function rc(){return{not:W()}}function nc(){return W()}var ac=(e,t)=>$(e.innerType._def,t),oc=(e,t,r)=>{switch(t){case k.ZodString:return Cr(e,r);case k.ZodNumber:return qi(e);case k.ZodObject:return Gi(e,r);case k.ZodBigInt:return Zi(e);case k.ZodBoolean:return $i();case k.ZodDate:return Pr(e,r);case k.ZodUndefined:return rc();case k.ZodNull:return Vi();case k.ZodArray:return zi(e,r);case k.ZodUnion:case k.ZodDiscriminatedUnion:return Bi(e,r);case k.ZodIntersection:return Ci(e,r);case k.ZodTuple:return tc(e,r);case k.ZodRecord:return jr(e,r);case k.ZodLiteral:return ji(e);case k.ZodEnum:return Ri(e);case k.ZodNativeEnum:return Li(e);case k.ZodNullable:return Wi(e,r);case k.ZodOptional:return Xi(e,r);case k.ZodMap:return Ui(e,r);case k.ZodSet:return ec(e,r);case k.ZodLazy:return()=>e.getter()._def;case k.ZodPromise:return Ki(e,r);case k.ZodNaN:case k.ZodNever:return Fi();case k.ZodEffects:return Oi(e,r);case k.ZodAny:return W();case k.ZodUnknown:return nc();case k.ZodDefault:return Ai(e,r);case k.ZodBranded:return Rr(e,r);case k.ZodReadonly:return ac(e,r);case k.ZodCatch:return Ti(e,r);case k.ZodPipeline:return Qi(e,r);case k.ZodFunction:case k.ZodVoid:case k.ZodSymbol:return;default:return(n=>{})()}};function $(e,t,r=!1){var n;const a=t.seen.get(e);if(t.override){const l=(n=t.override)==null?void 0:n.call(t,e,t,a,r);if(l!==xi)return l}if(a&&!r){const l=sc(a,t);if(l!==void 0)return l}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const i=oc(e,e.typeName,t),s=typeof i=="function"?$(i(),t):i;if(s&&ic(e,t,s),t.postProcess){const l=t.postProcess(s,e,t);return o.jsonSchema=s,l}return o.jsonSchema=s,s}var sc=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:ki(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),W()):t.$refStrategy==="seen"?W():void 0}},ic=(e,t,r)=>(e.description&&(r.description=e.description),r),cc=e=>{const t=Si(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}},uc=(e,t)=>{var r;const n=cc(t);let a=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((c,[d,u])=>{var _;return{...c,[d]:(_=$(u._def,{...n,currentPath:[...n.basePath,n.definitionPath,d]},!0))!=null?_:W()}},{}):void 0;const o=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=(r=$(e._def,o===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,o]},!1))!=null?r:W(),s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s);const l=o===void 0?a?{...i,[n.definitionPath]:a}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,o].join("/"),[n.definitionPath]:{...a,[o]:i}};return l.$schema="http://json-schema.org/draft-07/schema#",l},lc=uc;function dc(e,t){var r;const n=(r=void 0)!=null?r:!1;return ct(()=>lc(e,{$refStrategy:n?"root":"none"}),{validate:async a=>{const o=await e.safeParseAsync(a);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function pc(e,t){var r;const n=(r=void 0)!=null?r:!1;return ct(()=>as(e,{target:"draft-7",io:"output",reused:n?"ref":"inline"}),{validate:async a=>{const o=await kr(e,a);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function fc(e){return"_zod"in e}function Mr(e,t){return fc(e)?pc(e):dc(e)}var Xe=Symbol.for("vercel.ai.schema");function ct(e,{validate:t}={}){return{[Xe]:!0,_type:void 0,[Pe]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function hc(e){return typeof e=="object"&&e!==null&&Xe in e&&e[Xe]===!0&&"jsonSchema"in e&&"validate"in e}function mc(e){return e==null?ct({properties:{},additionalProperties:!1}):hc(e)?e:typeof e=="function"?e():Mr(e)}var vc=Object.defineProperty,gc=(e,t)=>{for(var r in t)vc(e,r,{get:t[r],enumerable:!0})},Dr="AI_NoObjectGeneratedError",Ur=`vercel.ai.error.${Dr}`,_c=Symbol.for(Ur),Lr,Mt=class extends te{constructor({message:e="No object generated.",cause:t,text:r,response:n,usage:a,finishReason:o}){super({name:Dr,message:e,cause:t}),this[Lr]=!0,this.text=r,this.response=n,this.usage=a,this.finishReason=o}static isInstance(e){return te.hasMarker(e,Ur)}};Lr=_c;var Dt="5.0.93",Fr=G([E(),Re(Uint8Array),Re(ArrayBuffer),Or(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]),be=ui(()=>G([Ds(),E(),Ps(),B(),Ge(E(),be),de(be)])),D=Ge(E(),Ge(E(),be)),Vr=L({type:x("text"),text:E(),providerOptions:D.optional()}),yc=L({type:x("image"),image:G([Fr,Re(URL)]),mediaType:E().optional(),providerOptions:D.optional()}),Br=L({type:x("file"),data:G([Fr,Re(URL)]),filename:E().optional(),mediaType:E(),providerOptions:D.optional()}),bc=L({type:x("reasoning"),text:E(),providerOptions:D.optional()}),wc=L({type:x("tool-call"),toolCallId:E(),toolName:E(),input:K(),providerOptions:D.optional(),providerExecuted:B().optional()}),Ic=Bs("type",[L({type:x("text"),value:E()}),L({type:x("json"),value:be}),L({type:x("error-text"),value:E()}),L({type:x("error-json"),value:be}),L({type:x("content"),value:de(G([L({type:x("text"),text:E()}),L({type:x("media"),data:E(),mediaType:E()})]))})]),Jr=L({type:x("tool-result"),toolCallId:E(),toolName:E(),output:Ic,providerOptions:D.optional()}),Ec=L({role:x("system"),content:E(),providerOptions:D.optional()}),kc=L({role:x("user"),content:G([E(),de(G([Vr,yc,Br]))]),providerOptions:D.optional()}),xc=L({role:x("assistant"),content:G([E(),de(G([Vr,Br,bc,wc,Jr]))]),providerOptions:D.optional()}),Sc=L({role:x("tool"),content:de(Jr),providerOptions:D.optional()});G([Ec,kc,xc,Sc]);Ee({prefix:"aitxt",size:24});(class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}});var zc=bi(()=>Mr(G([j({type:x("text-start"),id:E(),providerMetadata:D.optional()}),j({type:x("text-delta"),id:E(),delta:E(),providerMetadata:D.optional()}),j({type:x("text-end"),id:E(),providerMetadata:D.optional()}),j({type:x("error"),errorText:E()}),j({type:x("tool-input-start"),toolCallId:E(),toolName:E(),providerExecuted:B().optional(),dynamic:B().optional()}),j({type:x("tool-input-delta"),toolCallId:E(),inputTextDelta:E()}),j({type:x("tool-input-available"),toolCallId:E(),toolName:E(),input:K(),providerExecuted:B().optional(),providerMetadata:D.optional(),dynamic:B().optional()}),j({type:x("tool-input-error"),toolCallId:E(),toolName:E(),input:K(),providerExecuted:B().optional(),providerMetadata:D.optional(),dynamic:B().optional(),errorText:E()}),j({type:x("tool-output-available"),toolCallId:E(),output:K(),providerExecuted:B().optional(),dynamic:B().optional(),preliminary:B().optional()}),j({type:x("tool-output-error"),toolCallId:E(),errorText:E(),providerExecuted:B().optional(),dynamic:B().optional()}),j({type:x("reasoning-start"),id:E(),providerMetadata:D.optional()}),j({type:x("reasoning-delta"),id:E(),delta:E(),providerMetadata:D.optional()}),j({type:x("reasoning-end"),id:E(),providerMetadata:D.optional()}),j({type:x("source-url"),sourceId:E(),url:E(),title:E().optional(),providerMetadata:D.optional()}),j({type:x("source-document"),sourceId:E(),mediaType:E(),title:E(),filename:E().optional(),providerMetadata:D.optional()}),j({type:x("file"),url:E(),mediaType:E(),providerMetadata:D.optional()}),j({type:Or(e=>typeof e=="string"&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:E().optional(),data:K(),transient:B().optional()}),j({type:x("start-step")}),j({type:x("finish-step")}),j({type:x("start"),messageId:E().optional(),messageMetadata:K().optional()}),j({type:x("finish"),finishReason:Tr(["stop","length","content-filter","tool-calls","error","other","unknown"]).optional(),messageMetadata:K().optional()}),j({type:x("abort")}),j({type:x("message-metadata"),messageMetadata:K()})])));function Zc(e){return e.type.startsWith("data-")}function Wr(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;const r={...e};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const a=t[n];if(a===void 0)continue;const o=n in e?e[n]:void 0,i=a!==null&&typeof a=="object"&&!Array.isArray(a)&&!(a instanceof Date)&&!(a instanceof RegExp),s=o!=null&&typeof o=="object"&&!Array.isArray(o)&&!(o instanceof Date)&&!(o instanceof RegExp);i&&s?r[n]=Wr(o,a):r[n]=a}return r}function $c(e){const t=["ROOT"];let r=-1,n=null;function a(l,c,d){switch(l){case'"':{r=c,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=c,n=c,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=c,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{r=c,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{r=c,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function o(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=c,t.pop();break}}}function i(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":a(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{o(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),r=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{r=l,t.pop();break}default:{r=l,a(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=l,t.pop();break}default:{r=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const u=e.substring(n,l+1);!"false".startsWith(u)&&!"true".startsWith(u)&&!"null".startsWith(u)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?o(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l)):r=l;break}}}let s=e.slice(0,r+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const d=e.substring(n,e.length);"true".startsWith(d)?s+="true".slice(d.length):"false".startsWith(d)?s+="false".slice(d.length):"null".startsWith(d)&&(s+="null".slice(d.length))}}return s}async function qr(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await Ce({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await Ce({text:$c(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}function ze(e){return e.type.startsWith("tool-")}function Tc(e){return e.type==="dynamic-tool"}function Ut(e){return ze(e)||Tc(e)}function Lt(e){return e.type.split("-").slice(1).join("-")}function Nc({lastMessage:e,messageId:t}){return{message:e?.role==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function Ac({stream:e,messageMetadataSchema:t,dataPartSchemas:r,runUpdateMessageJob:n,onError:a,onToolCall:o,onData:i}){return e.pipeThrough(new TransformStream({async transform(s,l){await n(async({state:c,write:d})=>{var u,_,v,p;function m(h){const C=c.message.parts.filter(ze).find(z=>z.toolCallId===h);if(C==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return C}function g(h){const C=c.message.parts.filter(z=>z.type==="dynamic-tool").find(z=>z.toolCallId===h);if(C==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return C}function b(h){var O;const C=c.message.parts.find(Y=>ze(Y)&&Y.toolCallId===h.toolCallId),z=h,N=C;C!=null?(C.state=h.state,N.input=z.input,N.output=z.output,N.errorText=z.errorText,N.rawInput=z.rawInput,N.preliminary=z.preliminary,N.providerExecuted=(O=z.providerExecuted)!=null?O:C.providerExecuted,z.providerMetadata!=null&&C.state==="input-available"&&(C.callProviderMetadata=z.providerMetadata)):c.message.parts.push({type:`tool-${h.toolName}`,toolCallId:h.toolCallId,state:h.state,input:z.input,output:z.output,rawInput:z.rawInput,errorText:z.errorText,providerExecuted:z.providerExecuted,preliminary:z.preliminary,...z.providerMetadata!=null?{callProviderMetadata:z.providerMetadata}:{}})}function y(h){var O,C;const z=c.message.parts.find(ut=>ut.type==="dynamic-tool"&&ut.toolCallId===h.toolCallId),N=h,Y=z;z!=null?(z.state=h.state,Y.toolName=h.toolName,Y.input=N.input,Y.output=N.output,Y.errorText=N.errorText,Y.rawInput=(O=N.rawInput)!=null?O:Y.rawInput,Y.preliminary=N.preliminary,Y.providerExecuted=(C=N.providerExecuted)!=null?C:z.providerExecuted,N.providerMetadata!=null&&z.state==="input-available"&&(z.callProviderMetadata=N.providerMetadata)):c.message.parts.push({type:"dynamic-tool",toolName:h.toolName,toolCallId:h.toolCallId,state:h.state,input:N.input,output:N.output,errorText:N.errorText,preliminary:N.preliminary,providerExecuted:N.providerExecuted,...N.providerMetadata!=null?{callProviderMetadata:N.providerMetadata}:{}})}async function I(h){if(h!=null){const O=c.message.metadata!=null?Wr(c.message.metadata,h):h;t!=null&&await Pt({value:O,schema:t}),c.message.metadata=O}}switch(s.type){case"text-start":{const h={type:"text",text:"",providerMetadata:s.providerMetadata,state:"streaming"};c.activeTextParts[s.id]=h,c.message.parts.push(h),d();break}case"text-delta":{const h=c.activeTextParts[s.id];h.text+=s.delta,h.providerMetadata=(u=s.providerMetadata)!=null?u:h.providerMetadata,d();break}case"text-end":{const h=c.activeTextParts[s.id];h.state="done",h.providerMetadata=(_=s.providerMetadata)!=null?_:h.providerMetadata,delete c.activeTextParts[s.id],d();break}case"reasoning-start":{const h={type:"reasoning",text:"",providerMetadata:s.providerMetadata,state:"streaming"};c.activeReasoningParts[s.id]=h,c.message.parts.push(h),d();break}case"reasoning-delta":{const h=c.activeReasoningParts[s.id];h.text+=s.delta,h.providerMetadata=(v=s.providerMetadata)!=null?v:h.providerMetadata,d();break}case"reasoning-end":{const h=c.activeReasoningParts[s.id];h.providerMetadata=(p=s.providerMetadata)!=null?p:h.providerMetadata,h.state="done",delete c.activeReasoningParts[s.id],d();break}case"file":{c.message.parts.push({type:"file",mediaType:s.mediaType,url:s.url}),d();break}case"source-url":{c.message.parts.push({type:"source-url",sourceId:s.sourceId,url:s.url,title:s.title,providerMetadata:s.providerMetadata}),d();break}case"source-document":{c.message.parts.push({type:"source-document",sourceId:s.sourceId,mediaType:s.mediaType,title:s.title,filename:s.filename,providerMetadata:s.providerMetadata}),d();break}case"tool-input-start":{const h=c.message.parts.filter(ze);c.partialToolCalls[s.toolCallId]={text:"",toolName:s.toolName,index:h.length,dynamic:s.dynamic},s.dynamic?y({toolCallId:s.toolCallId,toolName:s.toolName,state:"input-streaming",input:void 0,providerExecuted:s.providerExecuted}):b({toolCallId:s.toolCallId,toolName:s.toolName,state:"input-streaming",input:void 0,providerExecuted:s.providerExecuted}),d();break}case"tool-input-delta":{const h=c.partialToolCalls[s.toolCallId];h.text+=s.inputTextDelta;const{value:O}=await qr(h.text);h.dynamic?y({toolCallId:s.toolCallId,toolName:h.toolName,state:"input-streaming",input:O}):b({toolCallId:s.toolCallId,toolName:h.toolName,state:"input-streaming",input:O}),d();break}case"tool-input-available":{s.dynamic?y({toolCallId:s.toolCallId,toolName:s.toolName,state:"input-available",input:s.input,providerExecuted:s.providerExecuted,providerMetadata:s.providerMetadata}):b({toolCallId:s.toolCallId,toolName:s.toolName,state:"input-available",input:s.input,providerExecuted:s.providerExecuted,providerMetadata:s.providerMetadata}),d(),o&&!s.providerExecuted&&await o({toolCall:s});break}case"tool-input-error":{s.dynamic?y({toolCallId:s.toolCallId,toolName:s.toolName,state:"output-error",input:s.input,errorText:s.errorText,providerExecuted:s.providerExecuted,providerMetadata:s.providerMetadata}):b({toolCallId:s.toolCallId,toolName:s.toolName,state:"output-error",input:void 0,rawInput:s.input,errorText:s.errorText,providerExecuted:s.providerExecuted,providerMetadata:s.providerMetadata}),d();break}case"tool-output-available":{if(s.dynamic){const h=g(s.toolCallId);y({toolCallId:s.toolCallId,toolName:h.toolName,state:"output-available",input:h.input,output:s.output,preliminary:s.preliminary})}else{const h=m(s.toolCallId);b({toolCallId:s.toolCallId,toolName:Lt(h),state:"output-available",input:h.input,output:s.output,providerExecuted:s.providerExecuted,preliminary:s.preliminary})}d();break}case"tool-output-error":{if(s.dynamic){const h=g(s.toolCallId);y({toolCallId:s.toolCallId,toolName:h.toolName,state:"output-error",input:h.input,errorText:s.errorText,providerExecuted:s.providerExecuted})}else{const h=m(s.toolCallId);b({toolCallId:s.toolCallId,toolName:Lt(h),state:"output-error",input:h.input,rawInput:h.rawInput,errorText:s.errorText,providerExecuted:s.providerExecuted})}d();break}case"start-step":{c.message.parts.push({type:"step-start"});break}case"finish-step":{c.activeTextParts={},c.activeReasoningParts={};break}case"start":{s.messageId!=null&&(c.message.id=s.messageId),await I(s.messageMetadata),(s.messageId!=null||s.messageMetadata!=null)&&d();break}case"finish":{s.finishReason!=null&&(c.finishReason=s.finishReason),await I(s.messageMetadata),s.messageMetadata!=null&&d();break}case"message-metadata":{await I(s.messageMetadata),s.messageMetadata!=null&&d();break}case"error":{a?.(new Error(s.errorText));break}default:if(Zc(s)){r?.[s.type]!=null&&await Pt({value:s.data,schema:r[s.type]});const h=s;if(h.transient){i?.(h);break}const O=h.id!=null?c.message.parts.find(C=>h.type===C.type&&h.id===C.id):void 0;O!=null?O.data=h.data:c.message.parts.push(h),i?.(h),d()}}l.enqueue(s)})}}))}async function Oc({stream:e,onError:t}){const r=e.getReader();try{for(;;){const{done:n}=await r.read();if(n)break}}catch(n){t?.(n)}finally{r.releaseLock()}}Ee({prefix:"aitxt",size:24});Ee({prefix:"aiobj",size:24});var Rc=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,r)=>{this.queue.push(async()=>{try{await e(),t()}catch(n){r(n)}}),this.processQueue()})}};Ee({prefix:"aiobj",size:24});var Pc={};gc(Pc,{object:()=>jc,text:()=>Cc});var Cc=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),jc=({schema:e})=>{const t=mc(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:r}){const n=await qr(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{const a=n.state;throw new Error(`Unsupported parse state: ${a}`)}}},async parseOutput({text:r},n){const a=await Ce({text:r});if(!a.success)throw new Mt({message:"No object generated: could not parse the response.",cause:a.error,text:r,response:n.response,usage:n.usage,finishReason:n.finishReason});const o=await it({value:a.value,schema:t});if(!o.success)throw new Mt({message:"No object generated: response did not match schema.",cause:o.error,text:r,response:n.response,usage:n.usage,finishReason:n.finishReason});return o.value}}};async function Mc(e){if(e==null)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw new Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async t=>{const{name:r,type:n}=t,a=await new Promise((o,i)=>{const s=new FileReader;s.onload=l=>{var c;o((c=l.target)==null?void 0:c.result)},s.onerror=l=>i(l),s.readAsDataURL(t)});return{type:"file",mediaType:n,filename:r,url:a}}))}var Dc=class{constructor({api:e="/api/chat",credentials:t,headers:r,body:n,fetch:a,prepareSendMessagesRequest:o,prepareReconnectToStreamRequest:i}){this.api=e,this.credentials=t,this.headers=r,this.body=n,this.fetch=a,this.prepareSendMessagesRequest=o,this.prepareReconnectToStreamRequest=i}async sendMessages({abortSignal:e,...t}){var r,n,a,o,i;const s=await ie(this.body),l=await ie(this.headers),c=await ie(this.credentials),d={...ae(l),...ae(t.headers)},u=await((r=this.prepareSendMessagesRequest)==null?void 0:r.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...s,...t.body},headers:d,credentials:c,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),_=(n=u?.api)!=null?n:this.api,v=u?.headers!==void 0?ae(u.headers):d,p=u?.body!==void 0?u.body:{...s,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},m=(a=u?.credentials)!=null?a:c,b=await((o=this.fetch)!=null?o:globalThis.fetch)(_,{method:"POST",headers:Ot({"Content-Type":"application/json",...v},`ai-sdk/${Dt}`,At()),body:JSON.stringify(p),credentials:m,signal:e});if(!b.ok)throw new Error((i=await b.text())!=null?i:"Failed to fetch the chat response.");if(!b.body)throw new Error("The response body is empty.");return this.processResponseStream(b.body)}async reconnectToStream(e){var t,r,n,a,o;const i=await ie(this.body),s=await ie(this.headers),l=await ie(this.credentials),c={...ae(s),...ae(e.headers)},d=await((t=this.prepareReconnectToStreamRequest)==null?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...i,...e.body},headers:c,credentials:l,requestMetadata:e.metadata})),u=(r=d?.api)!=null?r:`${this.api}/${e.chatId}/stream`,_=d?.headers!==void 0?ae(d.headers):c,v=(n=d?.credentials)!=null?n:l,m=await((a=this.fetch)!=null?a:globalThis.fetch)(u,{method:"GET",headers:Ot(_,`ai-sdk/${Dt}`,At()),credentials:v});if(m.status===204)return null;if(!m.ok)throw new Error((o=await m.text())!=null?o:"Failed to fetch the chat response.");if(!m.body)throw new Error("The response body is empty.");return this.processResponseStream(m.body)}},Uc=class extends Dc{constructor(e={}){super(e)}processResponseStream(e){return Ei({stream:e,schema:zc}).pipeThrough(new TransformStream({async transform(t,r){if(!t.success)throw t.error;r.enqueue(t.value)}}))}},Lc=class{constructor({generateId:e=fi,id:t=e(),transport:r=new Uc,messageMetadataSchema:n,dataPartSchemas:a,state:o,onError:i,onToolCall:s,onFinish:l,onData:c,sendAutomaticallyWhen:d}){this.activeResponse=void 0,this.jobExecutor=new Rc,this.sendMessage=async(u,_)=>{var v,p,m,g;if(u==null){await this.makeRequest({trigger:"submit-message",messageId:(v=this.lastMessage)==null?void 0:v.id,..._});return}let b;if("text"in u||"files"in u?b={parts:[...Array.isArray(u.files)?u.files:await Mc(u.files),..."text"in u&&u.text!=null?[{type:"text",text:u.text}]:[]]}:b=u,u.messageId!=null){const y=this.state.messages.findIndex(I=>I.id===u.messageId);if(y===-1)throw new Error(`message with id ${u.messageId} not found`);if(this.state.messages[y].role!=="user")throw new Error(`message with id ${u.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,y+1),this.state.replaceMessage(y,{...b,id:u.messageId,role:(p=b.role)!=null?p:"user",metadata:u.metadata})}else this.state.pushMessage({...b,id:(m=b.id)!=null?m:this.generateId(),role:(g=b.role)!=null?g:"user",metadata:u.metadata});await this.makeRequest({trigger:"submit-message",messageId:u.messageId,..._})},this.regenerate=async({messageId:u,..._}={})=>{const v=u==null?this.state.messages.length-1:this.state.messages.findIndex(p=>p.id===u);if(v===-1)throw new Error(`message ${u} not found`);this.state.messages=this.state.messages.slice(0,this.messages[v].role==="assistant"?v:v+1),await this.makeRequest({trigger:"regenerate-message",messageId:u,..._})},this.resumeStream=async(u={})=>{await this.makeRequest({trigger:"resume-stream",...u})},this.clearError=()=>{this.status==="error"&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolOutput=async({state:u="output-available",tool:_,toolCallId:v,output:p,errorText:m})=>this.jobExecutor.run(async()=>{var g,b;const y=this.state.messages,I=y[y.length-1];this.state.replaceMessage(y.length-1,{...I,parts:I.parts.map(h=>Ut(h)&&h.toolCallId===v?{...h,state:u,output:p,errorText:m}:h)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(h=>Ut(h)&&h.toolCallId===v?{...h,state:u,output:p,errorText:m}:h)),this.status!=="streaming"&&this.status!=="submitted"&&((g=this.sendAutomaticallyWhen)!=null&&g.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:(b=this.lastMessage)==null?void 0:b.id})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var u;this.status!=="streaming"&&this.status!=="submitted"||(u=this.activeResponse)!=null&&u.abortController&&this.activeResponse.abortController.abort()},this.id=t,this.transport=r,this.generateId=e,this.messageMetadataSchema=n,this.dataPartSchemas=a,this.state=o,this.onError=i,this.onToolCall=s,this.onFinish=l,this.onData=c,this.sendAutomaticallyWhen=d}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async makeRequest({trigger:e,metadata:t,headers:r,body:n,messageId:a}){var o,i,s,l;this.setStatus({status:"submitted",error:void 0});const c=this.lastMessage;let d=!1,u=!1,_=!1;try{const v={state:Nc({lastMessage:this.state.snapshot(c),messageId:this.generateId()}),abortController:new AbortController};v.abortController.signal.addEventListener("abort",()=>{d=!0}),this.activeResponse=v;let p;if(e==="resume-stream"){const g=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:r,body:n});if(g==null){this.setStatus({status:"ready"});return}p=g}else p=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:v.abortController.signal,metadata:t,headers:r,body:n,trigger:e,messageId:a});const m=g=>this.jobExecutor.run(()=>g({state:v.state,write:()=>{var b;this.setStatus({status:"streaming"}),v.state.message.id===((b=this.lastMessage)==null?void 0:b.id)?this.state.replaceMessage(this.state.messages.length-1,v.state.message):this.state.pushMessage(v.state.message)}}));await Oc({stream:Ac({stream:p,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:m,onError:g=>{throw g}}),onError:g=>{throw g}}),this.setStatus({status:"ready"})}catch(v){if(d||v.name==="AbortError")return d=!0,this.setStatus({status:"ready"}),null;_=!0,v instanceof TypeError&&(v.message.toLowerCase().includes("fetch")||v.message.toLowerCase().includes("network"))&&(u=!0),this.onError&&v instanceof Error&&this.onError(v),this.setStatus({status:"error",error:v})}finally{try{(i=this.onFinish)==null||i.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:d,isDisconnect:u,isError:_,finishReason:(o=this.activeResponse)==null?void 0:o.state.finishReason})}catch(v){console.error(v)}this.activeResponse=void 0}(s=this.sendAutomaticallyWhen)!=null&&s.call(this,{messages:this.state.messages})&&!_&&await this.makeRequest({trigger:"submit-message",messageId:(l=this.lastMessage)==null?void 0:l.id,metadata:t,headers:r,body:n})}},Je,Ft;function Fc(){if(Ft)return Je;Ft=1;function e(t,r){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let n,a=0;return function(...i){clearTimeout(n);const s=Date.now(),l=s-a,c=r-l;c<=0?(a=s,t.apply(this,i)):n=setTimeout(()=>{a=Date.now(),t.apply(this,i)},c)}}return Je=e,Je}var Vc=Fc();const Bc=Kr(Vc);var Gr=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},A=(e,t,r)=>(Gr(e,t,"read from private field"),r?r.call(e):t.get(e)),Q=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ee=(e,t,r,n)=>(Gr(e,t,"write to private field"),t.set(e,r),r);function Jc(e,t){return t!=null?Bc(e,t):e}var q,Ze,$e,he,me,ve,ce,Qe,Ke,Wc=class{constructor(e=[]){Q(this,q,void 0),Q(this,Ze,"ready"),Q(this,$e,void 0),Q(this,he,new Set),Q(this,me,new Set),Q(this,ve,new Set),this.pushMessage=t=>{ee(this,q,A(this,q).concat(t)),A(this,ce).call(this)},this.popMessage=()=>{ee(this,q,A(this,q).slice(0,-1)),A(this,ce).call(this)},this.replaceMessage=(t,r)=>{ee(this,q,[...A(this,q).slice(0,t),this.snapshot(r),...A(this,q).slice(t+1)]),A(this,ce).call(this)},this.snapshot=t=>structuredClone(t),this["~registerMessagesCallback"]=(t,r)=>{const n=r?Jc(t,r):t;return A(this,he).add(n),()=>{A(this,he).delete(n)}},this["~registerStatusCallback"]=t=>(A(this,me).add(t),()=>{A(this,me).delete(t)}),this["~registerErrorCallback"]=t=>(A(this,ve).add(t),()=>{A(this,ve).delete(t)}),Q(this,ce,()=>{A(this,he).forEach(t=>t())}),Q(this,Qe,()=>{A(this,me).forEach(t=>t())}),Q(this,Ke,()=>{A(this,ve).forEach(t=>t())}),ee(this,q,e)}get status(){return A(this,Ze)}set status(e){ee(this,Ze,e),A(this,Qe).call(this)}get error(){return A(this,$e)}set error(e){ee(this,$e,e),A(this,Ke).call(this)}get messages(){return A(this,q)}set messages(e){ee(this,q,[...e]),A(this,ce).call(this)}};q=new WeakMap;Ze=new WeakMap;$e=new WeakMap;he=new WeakMap;me=new WeakMap;ve=new WeakMap;ce=new WeakMap;Qe=new WeakMap;Ke=new WeakMap;var ue,Vt=class extends Lc{constructor({messages:e,...t}){const r=new Wc(e);super({...t,state:r}),Q(this,ue,void 0),this["~registerMessagesCallback"]=(n,a)=>A(this,ue)["~registerMessagesCallback"](n,a),this["~registerStatusCallback"]=n=>A(this,ue)["~registerStatusCallback"](n),this["~registerErrorCallback"]=n=>A(this,ue)["~registerErrorCallback"](n),ee(this,ue,r)}};ue=new WeakMap;function qc({experimental_throttle:e,resume:t=!1,...r}={}){const n=F.useRef("chat"in r?r.chat:new Vt(r));("chat"in r&&r.chat!==n.current||"id"in r&&n.current.id!==r.id)&&(n.current="chat"in r?r.chat:new Vt(r));const o="id"in r?r.id:null,i=F.useCallback(u=>n.current["~registerMessagesCallback"](u,e),[e,o]),s=F.useSyncExternalStore(i,()=>n.current.messages,()=>n.current.messages),l=F.useSyncExternalStore(n.current["~registerStatusCallback"],()=>n.current.status,()=>n.current.status),c=F.useSyncExternalStore(n.current["~registerErrorCallback"],()=>n.current.error,()=>n.current.error),d=F.useCallback(u=>{typeof u=="function"&&(u=u(n.current.messages)),n.current.messages=u},[n]);return F.useEffect(()=>{t&&n.current.resumeStream()},[t,n]),{id:n.current.id,messages:s,setMessages:d,sendMessage:n.current.sendMessage,regenerate:n.current.regenerate,clearError:n.current.clearError,stop:n.current.stop,error:c,resumeStream:n.current.resumeStream,status:l,addToolResult:n.current.addToolOutput,addToolOutput:n.current.addToolOutput}}const Yr=F.forwardRef(({className:e,children:t,...r},n)=>S.jsx("div",{ref:n,className:le("relative overflow-auto",e),...r,children:t}));Yr.displayName="ScrollArea";const Hr=F.forwardRef(({className:e,...t},r)=>S.jsx("div",{ref:r,className:le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Hr.displayName="Avatar";const Gc=F.forwardRef(({className:e,...t},r)=>S.jsx("img",{ref:r,className:le("aspect-square h-full w-full",e),...t}));Gc.displayName="AvatarImage";const Xr=F.forwardRef(({className:e,...t},r)=>S.jsx("div",{ref:r,className:le("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Xr.displayName="AvatarFallback";const Yc=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Hc=et("bot",Yc);const Xc=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Qc=et("send",Xc);const Kc=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],eu=et("user",Kc);function tu({message:e}){const t=e.role==="user",n="content"in e&&typeof e.content=="string"?e.content:"parts"in e&&Array.isArray(e.parts)?e.parts.filter(a=>a.type==="text").map(a=>a.text).join(""):"";return S.jsxs("div",{className:le("flex gap-3 p-4 rounded-lg",t?"bg-muted/50":"bg-background"),children:[S.jsx(Hr,{className:"h-8 w-8 mt-1",children:S.jsx(Xr,{className:t?"bg-primary text-primary-foreground":"bg-secondary",children:t?S.jsx(eu,{className:"h-4 w-4"}):S.jsx(Hc,{className:"h-4 w-4"})})}),S.jsxs("div",{className:"flex-1 space-y-2",children:[S.jsx("div",{className:"font-semibold text-sm",children:t?"You":"Arab GPT"}),S.jsx("div",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:n})]})]})}function ru({messages:e}){const t=F.useRef(null);return F.useEffect(()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},[e]),S.jsx(Yr,{ref:t,className:"flex-1 p-4",children:S.jsx("div",{className:"space-y-4 max-w-3xl mx-auto",children:e.length===0?S.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to Arab GPT"}),S.jsx("p",{className:"text-muted-foreground",children:"Start a conversation by typing a message below"})]}):e.map(r=>S.jsx(tu,{message:r},r.id))})})}const nu=[{id:"translate-to-arabic",label:"Translate to Arabic",icon:"ðŸ”¤",prompt:"Translate this word (or sentence) to arabic. Do not translate literally and use expressions and language used by arabs today. However, it should be modern standard arabic. Also give at least 3 different variations if the input is a sentence."}];function au({onSelectAction:e,disabled:t}){return S.jsx("div",{className:"px-4 py-2 border-t bg-background/50",children:S.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:nu.map(r=>S.jsxs(Bt,{variant:"outline",size:"sm",onClick:()=>e(r.prompt),disabled:t,className:"whitespace-nowrap",children:[r.icon&&S.jsx("span",{className:"mr-1",children:r.icon}),r.label]},r.id))})})}const Qr=F.forwardRef(({className:e,...t},r)=>S.jsx("textarea",{className:le("flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-none",e),ref:r,...t}));Qr.displayName="Textarea";function iu(){const[e,t]=F.useState(""),r=F.useRef(null),{messages:n,sendMessage:a,status:o,error:i}=qc(),s=async d=>{if(d?.preventDefault(),!e.trim()||o==="streaming"||o==="submitted")return;const u=e;t(""),await a({text:u})},l=d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),s())},c=d=>{const u=e,_=u?`

`:"",v=d.indexOf("{input}");if(v!==-1){const p=d.slice(0,v),m=d.slice(v+7),g=u+_+p+m;t(g);const b=u.length+_.length+v;setTimeout(()=>{r.current&&(r.current.focus(),r.current.setSelectionRange(b,b))},0)}else t(u+_+d),setTimeout(()=>r.current?.focus(),0)};return S.jsxs("div",{className:"flex flex-col h-screen max-h-screen",children:[S.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-backdrop-filter:bg-background/60",children:S.jsx("div",{className:"flex h-14 items-center px-4",children:S.jsx("h1",{className:"text-lg font-semibold",children:"Arab GPT"})})}),S.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[i&&S.jsxs("div",{className:"bg-destructive/15 text-destructive px-4 py-2 text-sm",children:["Error: ",i.message]}),S.jsx(ru,{messages:n}),S.jsx(au,{onSelectAction:c,disabled:o==="streaming"||o==="submitted"}),S.jsxs("form",{onSubmit:s,className:"flex gap-2 p-4 border-t bg-background",children:[S.jsx(Qr,{ref:r,value:e,onChange:d=>t(d.target.value),onKeyDown:l,placeholder:"Type your message... (Shift+Enter for new line)",disabled:o==="streaming"||o==="submitted",className:"flex-1 min-h-[60px] max-h-[200px]",autoFocus:!0}),S.jsx(Bt,{type:"submit",disabled:!e.trim()||o==="streaming"||o==="submitted",size:"icon",className:"self-end",children:S.jsx(Qc,{className:"h-4 w-4"})})]})]})]})}export{iu as component};
